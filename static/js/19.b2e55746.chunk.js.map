{"version":3,"sources":["../node_modules/react-use/esm/useUpdateEffect.js","../node_modules/react-use/esm/useFirstMountState.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","hooks/useStickySWR.js","components/Home.js","hooks/useIsVisible.js"],"names":["useUpdateEffect","effect","deps","isFirstMount","isFirst","useRef","current","useFirstMountState","useEffect","_objectWithoutProperties","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","useStickySWR","fetcher","swrOptions","useState","options","setOptions","args","useSWR","data","isValidating","error","rest","produce","draftOptions","initialData","TimeseriesExplorer","lazy","MapExplorer","Actions","Table","Minigraphs","Footer","Search","Level","MapSwitcher","StateHeader","Home","props","stateCode","districtName","regionHighlighted","setRegionHighlighted","anchor","setAnchor","useSessionStorage","mapStatistic","setMapStatistic","date","setDate","location","useLocation","timeseries","revalidateOnMount","refreshInterval","homeRightElement","isVisible","useIsVisible","width","useWindowSize","stateCodes","Set","MAP_META","filter","sort","Fragment","Helmet","name","content","className","fallback","style","minHeight","dates","reverse","position","height","ref","hash","OPTIONS","root","rootMargin","threshold","elementRef","setIsVisible","undefined","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","window","requestIdleCallback","unobserve","observe"],"mappings":"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","file":"static/js/19.b2e55746.chunk.js","sourcesContent":["/* eslint-disable */\nimport { useEffect } from 'react';\nimport { useFirstMountState } from './useFirstMountState';\nvar useUpdateEffect = function (effect, deps) {\n    var isFirstMount = useFirstMountState();\n    useEffect(function () {\n        if (!isFirstMount) {\n            return effect();\n        }\n    }, deps);\n};\nexport default useUpdateEffect;\n","import { useRef } from 'react';\nexport function useFirstMountState() {\n    var isFirst = useRef(true);\n    if (isFirst.current) {\n        isFirst.current = false;\n        return true;\n    }\n    return isFirst.current;\n}\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import produce from 'immer';\nimport {useState} from 'react';\nimport {useUpdateEffect} from 'react-use';\nimport useSWR from 'swr';\n\nexport function useStickySWR(key, fetcher, swrOptions, ...args) {\n  const [options, setOptions] = useState(swrOptions);\n\n  const {data, isValidating, error, ...rest} = useSWR(\n    key,\n    fetcher,\n    options,\n    ...args\n  );\n\n  useUpdateEffect(() => {\n    setOptions(\n      produce(options, (draftOptions) => {\n        draftOptions.initialData = data;\n      })\n    );\n  }, [data]);\n\n  return {\n    ...rest,\n    isValidating,\n    error,\n    data,\n  };\n}\n\nexport default useStickySWR;\n","import {MAP_META} from '../constants';\nimport useIsVisible from '../hooks/useIsVisible';\nimport useStickySWR from '../hooks/useStickySWR';\nimport {fetcher} from '../utils/commonFunctions';\n\nimport React, {useState, useRef, lazy, Suspense} from 'react';\nimport {Helmet} from 'react-helmet';\nimport {useLocation} from 'react-router-dom';\nimport {useSessionStorage, useWindowSize} from 'react-use';\n\nconst TimeseriesExplorer = lazy(() => import('./TimeseriesExplorer'));\nconst MapExplorer = lazy(() => import('./MapExplorer'));\nconst Actions = lazy(() => import('./Actions'));\nconst Table = lazy(() => import('./Table'));\nconst Minigraphs = lazy(() => import('./Minigraphs'));\nconst Footer = lazy(() => import('./Footer'));\nconst Search = lazy(() => import('./Search'));\nconst Level = lazy(() => import('./Level'));\nconst MapSwitcher = lazy(() => import('./MapSwitcher'));\nconst StateHeader = lazy(() => import('./StateHeader'));\n\nfunction Home(props) {\n  const [regionHighlighted, setRegionHighlighted] = useState({\n    stateCode: 'TT',\n    districtName: null,\n  });\n\n  const [anchor, setAnchor] = useState(null);\n  const [mapStatistic, setMapStatistic] = useSessionStorage(\n    'mapStatistic',\n    'active'\n  );\n  const [date, setDate] = useState('');\n  const location = useLocation();\n\n  const {data: timeseries} = useStickySWR(\n    'https://api.covid19india.org/v3/min/timeseries.min.json',\n    fetcher,\n    {\n      revalidateOnMount: true,\n      refreshInterval: 100000,\n    }\n  );\n\n  const {data} = useStickySWR(\n    `https://api.covid19india.org/v3/min/data${\n      date ? `-${date}` : ''\n    }.min.json`,\n    fetcher,\n    {\n      revalidateOnMount: true,\n      refreshInterval: 100000,\n    }\n  );\n\n  const homeRightElement = useRef();\n  const isVisible = useIsVisible(homeRightElement);\n  const {width} = useWindowSize();\n\n  const stateCodes = [\n    'TT',\n    ...[\n      ...new Set([\n        ...Object.keys(MAP_META).filter((stateCode) => stateCode !== 'TT'),\n        ...Object.keys(data || {}).filter((stateCode) => stateCode !== 'TT'),\n      ]),\n    ].sort(),\n  ];\n\n  return (\n    <React.Fragment>\n      <Helmet>\n        <title>Coronavirus Outbreak in India - covid19india.org</title>\n        <meta\n          name=\"title\"\n          content=\"Coronavirus Outbreak in India: Latest Map and Case Count\"\n        />\n      </Helmet>\n\n      <div className=\"Home\">\n        <div className=\"home-left\">\n          <div className=\"header\">\n            <Suspense fallback={<div />}>\n              <Search />\n            </Suspense>\n\n            {timeseries && (\n              <Suspense fallback={<div style={{minHeight: '56px'}} />}>\n                <Actions\n                  {...{\n                    setDate,\n                    dates: Object.keys(timeseries['TT']).reverse(),\n                    date,\n                  }}\n                />\n              </Suspense>\n            )}\n          </div>\n\n          <div style={{position: 'relative'}}>\n            {data && (\n              <Suspense fallback={<div style={{height: '50rem'}} />}>\n                {width > 769 && (\n                  <MapSwitcher {...{mapStatistic, setMapStatistic}} />\n                )}\n                <Level data={data['TT']} />\n              </Suspense>\n            )}\n\n            {timeseries && (\n              <Suspense fallback={<div style={{height: '50rem'}} />}>\n                <Minigraphs timeseries={timeseries['TT']} {...{date}} />\n              </Suspense>\n            )}\n          </div>\n\n          {data && (\n            <Suspense fallback={<div />}>\n              <Table {...{data, regionHighlighted, setRegionHighlighted}} />\n            </Suspense>\n          )}\n        </div>\n\n        <div className=\"home-right\" ref={homeRightElement}>\n          {(isVisible || location.hash) && (\n            <React.Fragment>\n              {data && (\n                <Suspense fallback={<div style={{height: '50rem'}} />}>\n                  <StateHeader data={data['TT']} stateCode={'TT'} />\n                  <MapExplorer\n                    stateCode=\"TT\"\n                    {...{data}}\n                    {...{mapStatistic, setMapStatistic}}\n                    {...{regionHighlighted, setRegionHighlighted}}\n                    {...{anchor, setAnchor}}\n                  />\n                </Suspense>\n              )}\n\n              {timeseries && (\n                <Suspense fallback={<div />}>\n                  <TimeseriesExplorer\n                    timeseries={timeseries[regionHighlighted.stateCode]}\n                    {...{date, stateCodes}}\n                    {...{regionHighlighted, setRegionHighlighted}}\n                    {...{anchor, setAnchor}}\n                  />\n                </Suspense>\n              )}\n            </React.Fragment>\n          )}\n        </div>\n      </div>\n\n      {isVisible && (\n        <Suspense fallback={<div />}>\n          <Footer />\n        </Suspense>\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default Home;\n","import {useState, useEffect} from 'react';\n\nconst OPTIONS = {\n  root: null,\n  rootMargin: '0px 0px 0px 0px',\n  threshold: 0,\n};\n\nconst useIsVisible = (elementRef) => {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (elementRef.current !== undefined) {\n      const observer = new IntersectionObserver((entries, observer) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            window.requestIdleCallback(() => {\n              setIsVisible(true);\n              observer.unobserve(elementRef.current);\n            });\n          }\n        });\n      }, OPTIONS);\n      observer.observe(elementRef.current);\n    }\n  }, [elementRef]);\n\n  return isVisible;\n};\n\nexport default useIsVisible;\n"],"sourceRoot":""}